<?xml version="1.0" encoding="UTF-8"?>
<svg width="1600" height="900" viewBox="0 0 1600 900" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <style>
    .title { font: 700 28px 'Arial'; fill: #073642; }
    .subtitle { font: 600 16px 'Arial'; fill: #064e3b; }
    .colLabel { font: 700 18px 'Arial'; fill: #ffffff; }
    .boxTitle { font: 600 14px 'Arial'; fill: #0f172a; }
    .small { font: 400 12px 'Arial'; fill: #0f172a; }
    .num { font: 700 12px 'Arial'; fill: #ffffff; }
    .arrowLabel { font: 600 12px 'Arial'; fill: #0f172a; }
  </style>

  <!-- Background -->
  <rect width="100%" height="100%" fill="#f8fafc"/>

  <!-- Title -->
  <text x="80" y="48" class="title">Panchakarma Management Software — Architecture</text>
  <text x="80" y="78" class="small">Patient & Practitioner apps → Core Services (Scheduling, Notifications, DB, Analytics) → Clinic / Admin Dashboards</text>

  <!-- Three column headers -->
  <g>
    <rect x="40" y="110" rx="14" ry="14" width="460" height="60" fill="#0ea5a4" />
    <text x="60" y="148" class="colLabel">Patient Side</text>

    <rect x="570" y="110" rx="14" ry="14" width="460" height="60" fill="#60a5fa" />
    <text x="590" y="148" class="colLabel">Core Services & APIs</text>

    <rect x="1100" y="110" rx="14" ry="14" width="460" height="60" fill="#34d399" />
    <text x="1120" y="148" class="colLabel">Clinic / Admin Side</text>
  </g>

  <!-- Patient column boxes -->
  <g>
    <rect x="60" y="190" rx="10" width="400" height="100" fill="#ffffff" stroke="#c7d2fe" stroke-width="1.5" />
    <text x="80" y="220" class="boxTitle">Patient Mobile / Web App</text>
    <text x="80" y="240" class="small">- Book/Join therapy sessions</text>
    <text x="80" y="258" class="small">- Receive pre/post reminders</text>

    <rect x="60" y="310" rx="10" width="400" height="100" fill="#ffffff" stroke="#c7d2fe" stroke-width="1.5" />
    <text x="80" y="340" class="boxTitle">Patient Timeline & Feedback</text>
    <text x="80" y="360" class="small">- Submit symptom & feedback forms</text>
    <text x="80" y="378" class="small">- View progress & milestones</text>

    <rect x="60" y="430" rx="10" width="400" height="100" fill="#ffffff" stroke="#c7d2fe" stroke-width="1.5" />
    <text x="80" y="460" class="boxTitle">Local Notifications & Settings</text>
    <text x="80" y="480" class="small">- Notification preferences (SMS/Email/In-app)</text>
  </g>

  <!-- Clinic/Admin column boxes -->
  <g>
    <rect x="1120" y="190" rx="10" width="400" height="100" fill="#ffffff" stroke="#bbf7d0" stroke-width="1.5" />
    <text x="1140" y="220" class="boxTitle">Practitioner Dashboard</text>
    <text x="1140" y="240" class="small">- Calendar & availability</text>
    <text x="1140" y="258" class="small">- Mark session complete</text>

    <rect x="1120" y="310" rx="10" width="400" height="100" fill="#ffffff" stroke="#bbf7d0" stroke-width="1.5" />
    <text x="1140" y="340" class="boxTitle">Admin Portal</text>
    <text x="1140" y="360" class="small">- Program management & billing</text>
    <text x="1140" y="378" class="small">- Quality benchmarking</text>

    <rect x="1120" y="430" rx="10" width="400" height="100" fill="#ffffff" stroke="#bbf7d0" stroke-width="1.5" />
    <text x="1140" y="460" class="boxTitle">Local Clinic Systems</text>
    <text x="1140" y="480" class="small">- EMR / Lab / In-house devices</text>
  </g>

  <!-- Core Services center boxes -->
  <g>
    <rect x="610" y="190" rx="10" width="340" height="120" fill="#ffffff" stroke="#93c5fd" stroke-width="1.5" />
    <text x="630" y="220" class="boxTitle">API Gateway & Auth</text>
    <text x="630" y="240" class="small">- JWT / OAuth2, role-based auth</text>

    <rect x="610" y="330" rx="10" width="340" height="120" fill="#ffffff" stroke="#93c5fd" stroke-width="1.5" />
    <text x="630" y="360" class="boxTitle">Therapy Scheduling Service</text>
    <text x="630" y="380" class="small">- Generate sessions, avoid conflicts</text>
    <text x="630" y="398" class="small">- Rescheduling & waitlist logic</text>

    <rect x="610" y="470" rx="10" width="340" height="120" fill="#ffffff" stroke="#93c5fd" stroke-width="1.5" />
    <text x="630" y="500" class="boxTitle">Notification Service & Queue</text>
    <text x="630" y="520" class="small">- In-app / SMS / Email (templates)</text>
    <text x="630" y="538" class="small">- Retry & delivery tracking</text>
  </g>

  <!-- Database and ML boxes under core -->
  <g>
    <rect x="610" y="610" rx="10" width="340" height="100" fill="#ffffff" stroke="#93c5fd" stroke-width="1.5" />
    <text x="630" y="640" class="boxTitle">Central Datastore</text>
    <text x="630" y="660" class="small">- TherapyProgram, Templates, Appointments, Users</text>

    <rect x="980" y="610" rx="10" width="220" height="100" fill="#fff7ed" stroke="#fcd34d" stroke-width="1.2" />
    <text x="1000" y="640" class="boxTitle">Analytics & Reporting</text>
    <text x="1000" y="660" class="small">- Aggregations, KPI endpoints</text>

    <rect x="370" y="610" rx="10" width="220" height="100" fill="#fff1f2" stroke="#fb7185" stroke-width="1.2" />
    <text x="390" y="640" class="boxTitle">ML / Reasoning Module</text>
    <text x="390" y="660" class="small">- Symptom trend models, schedule optimization</text>
  </g>

  <!-- External services -->
  <g>
    <rect x="60" y="740" rx="8" width="300" height="80" fill="#111827" />
    <text x="80" y="775" class="small" fill="#fff">External Integrations:</text>
    <text x="80" y="793" class="small" fill="#fff">SMS (Twilio), Email (SendGrid), Payment Gateway</text>

    <rect x="1140" y="740" rx="8" width="300" height="80" fill="#111827" />
    <text x="1160" y="775" class="small" fill="#fff">Clinic Systems:</text>
    <text x="1160" y="793" class="small" fill="#fff">Local EMR, Lab APIs</text>
  </g>

  <!-- Arrows: Patient -> Core, Core -> Clinic -->
  <g stroke="#0f172a" stroke-width="2" fill="none">
    <!-- Patient Mobile to API Gateway -->
    <path d="M460 240 L570 240" stroke="#0ea5a4" stroke-width="4" marker-end="url(#arrow)" />
    <text x="485" y="230" class="arrowLabel">1. Book / Request Program</text>

    <!-- Patient Feedback to ML/Datastore -->
    <path d="M260 420 L400 420" stroke="#0ea5a4" stroke-width="3" marker-end="url(#arrow)" />
    <text x="310" y="410" class="arrowLabel">2. Submit Feedback / Symptoms</text>

    <!-- API Gateway to Scheduling -->
    <path d="M830 250 L1120 250" stroke="#60a5fa" stroke-width="3" marker-end="url(#arrow)" />
    <text x="900" y="240" class="arrowLabel">3. Scheduling / Conflict Check</text>

    <!-- Scheduling to Notification Service -->
    <path d="M770 420 L770 470" stroke="#60a5fa" stroke-width="3" marker-end="url(#arrow)" />
    <text x="700" y="450" class="arrowLabel">4. Schedule Reminders</text>

    <!-- Notification Service to External SMS/Email -->
    <path d="M950 530 L360 700" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrow)" />
    <text x="600" y="600" class="arrowLabel">5. Send via SMS / Email</text>

    <!-- Central Datastore arrows to Clinic and Analytics -->
    <path d="M790 660 L980 660" stroke="#94a3b8" stroke-width="3" marker-end="url(#arrow)" />
    <text x="840" y="650" class="arrowLabel">6. Data for Reports</text>

    <!-- ML module back to Scheduling for optimizations -->
    <path d="M480 660 L610 660" stroke="#ef4444" stroke-width="3" marker-end="url(#arrow)" />
    <text x="520" y="650" class="arrowLabel">7. Optimization & Risk Flags</text>

    <!-- Clinic Dashboard receives -> update -->
    <path d="M980 240 L1120 240" stroke="#34d399" stroke-width="3" marker-end="url(#arrow)" />
    <text x="1030" y="230" class="arrowLabel">8. Session Confirmations / Updates</text>
  </g>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="5" orient="auto">
      <path d="M0 0 L10 5 L0 10 z" fill="#0f172a" />
    </marker>
  </defs>

  <!-- Numbered steps badges -->
  <g>
    <circle cx="540" cy="230" r="14" fill="#0ea5a4" />
    <text x="534" y="236" class="num">1</text>

    <circle cx="340" cy="410" r="14" fill="#0ea5a4" />
    <text x="335" y="416" class="num">2</text>

    <circle cx="860" cy="240" r="14" fill="#60a5fa" />
    <text x="854" y="246" class="num">3</text>

    <circle cx="760" cy="450" r="14" fill="#60a5fa" />
    <text x="755" y="456" class="num">4</text>

    <circle cx="830" cy="580" r="14" fill="#f59e0b" />
    <text x="824" y="586" class="num">5</text>

    <circle cx="900" cy="660" r="14" fill="#94a3b8" />
    <text x="895" y="666" class="num">6</text>

    <circle cx="540" cy="660" r="14" fill="#ef4444" />
    <text x="535" y="666" class="num">7</text>

    <circle cx="1040" cy="240" r="14" fill="#34d399" />
    <text x="1035" y="246" class="num">8</text>
  </g>

  <!-- Footer legend -->
  <rect x="60" y="850" width="1480" height="36" rx="6" fill="#e6f6f3" />
  <text x="80" y="876" class="small">Legend: 1=Booking, 2=Feedback, 3=Scheduling, 4=Reminders, 5=External channels, 6=Analytics, 7=ML Optimizations, 8=Clinic updates</text>

</svg>